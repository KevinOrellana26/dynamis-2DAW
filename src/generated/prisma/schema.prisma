generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
  // output   = "/node_modules/@prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//1-invitado
//2-usuario
//3-admin
enum Rol {
  GUEST
  USER
  ADMIN
}

model User {
  id            String     @id @default(cuid())
  name          String?
  email         String     @unique
  emailVerified DateTime?
  password      String
  avatar        String?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  role          Rol        @default(USER)
  Progress      Progress[]
  Routine       Routine[]
  Favorite      Favorite[]
}

model Progress {
  id          Int      @id @default(autoincrement())
  user_id     String // Cambiado a String
  exercise_id Int
  date        DateTime @default(now()) @db.Date
  weight_used Float
  repetitions Int
  user        User     @relation(fields: [user_id], references: [id])
  exercise    Exercise @relation(fields: [exercise_id], references: [id])
}

model Routine {
  id               Int                @id @default(autoincrement())
  user_id          String
  name             String
  createdAt        DateTime?          @default(now()) @db.Date
  description      String
  duration         Int
  totalExercise    Int
  user             User               @relation(fields: [user_id], references: [id])
  Exercise_routine Exercise_routine[]
}

model Favorite {
  id          Int      @id @default(autoincrement())
  user_id     String
  exercise_id Int
  // fecha_creacion DateTime? @default(now()) @db.Date
  user        User     @relation(fields: [user_id], references: [id])
  exercise    Exercise @relation(fields: [exercise_id], references: [id])
}

model Exercise {
  id               Int                @id @default(autoincrement())
  name             String
  muscle           String
  video_img_url    String
  Progress         Progress[]
  Favorite         Favorite[]
  Exercise_routine Exercise_routine[]
}

model Exercise_routine {
  id          Int      @id @default(autoincrement())
  routine_id  Int
  exercise_id Int
  series      Int
  repetitions Int
  routine     Routine  @relation(fields: [routine_id], references: [id])
  exercise    Exercise @relation(fields: [exercise_id], references: [id])
}
